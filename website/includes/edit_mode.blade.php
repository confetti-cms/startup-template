@pushonce('end_of_body_edit_mode')
    <script>
        document.addEventListener('DOMContentLoaded', function () {

            /**
             * Add edit buttons when pressed Shift
             */
            document.querySelectorAll('[class^="js-edit:"]').forEach(el => {
                const id = el.classList[0].split(':')[1];
                const button = document.createElement('a');
                button.href = '/admin' + id + '?redirect_url=' + window.location.href;

                // Open in a new tab
                button.target = '_blank';

                // Edit icon
                button.innerHTML = '' +
                    '<button class="js-edit-button absolute z-200 w-[40px] h-[40px] -mb-[40px] p-2 cursor-pointer opacity-80 hover:opacity-100 transition duration-300 ease-in-out transform hover:-translate-y-1 hover:scale-110">' +
                        '<svg fill="#f4f1f1" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="40px" height="40px" viewBox="-316.76 -316.76 1128.46 1128.46" xml:space="preserve" stroke="#f4f1f1" stroke-width="11.878464"><g id="SVGRepo_bgCarrier" stroke-width="0" transform="translate(0,0), scale(1)"><path transform="translate(-316.76, -316.76), scale(35.264375)" d="M16,29.187426012228517C18.594811173872355,28.650350213179077,20.392074443932984,26.539671434567353,22.408324728345647,24.820302296603295C24.24294663980155,23.255817808354962,26.071765981422246,21.770393967546156,27.197843530275232,19.638399918320644C28.517120678691516,17.140622538274563,30.19689788542861,14.357035487880749,29.35979314667773,11.659140069047009C28.52121388446307,8.956492425176476,25.407180403359828,7.862845598477267,23.055684741078473,6.28868308583526C20.810023944307027,4.785369641932156,18.701873779520316,2.768810018096028,16,2.715689359999754C13.276712431650736,2.662147692393876,10.95102676551656,4.416708062147371,8.739822974302012,6.0072236024091055C6.517941695883877,7.605419443055511,3.9196182088792915,9.20569259892131,3.2782232101921647,11.866444149912798C2.6484152554886102,14.479128214700308,4.853538449004711,16.802343419522526,5.509308453888682,19.408632310435607C6.236729543064805,22.29969089746426,5.142468872688697,25.90992502249468,7.3231648309289685,27.942639053617803C9.51411595900435,29.984912339224163,13.066980588455369,29.794504384614292,16,29.187426012228517" fill="#2b7fff" strokewidth="0"></path></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#3e6eb6" stroke-width="23.756928"> <g> <g> <path d="M389.844,182.85c-6.743,0-12.21,5.467-12.21,12.21v222.968c0,23.562-19.174,42.735-42.736,42.735H67.157 c-23.562,0-42.736-19.174-42.736-42.735V150.285c0-23.562,19.174-42.735,42.736-42.735h267.741c6.743,0,12.21-5.467,12.21-12.21 s-5.467-12.21-12.21-12.21H67.157C30.126,83.13,0,113.255,0,150.285v267.743c0,37.029,30.126,67.155,67.157,67.155h267.741 c37.03,0,67.156-30.126,67.156-67.155V195.061C402.054,188.318,396.587,182.85,389.844,182.85z"></path> <path d="M483.876,20.791c-14.72-14.72-38.669-14.714-53.377,0L221.352,229.944c-0.28,0.28-3.434,3.559-4.251,5.396l-28.963,65.069 c-2.057,4.619-1.056,10.027,2.521,13.6c2.337,2.336,5.461,3.576,8.639,3.576c1.675,0,3.362-0.346,4.96-1.057l65.07-28.963 c1.83-0.815,5.114-3.97,5.396-4.25L483.876,74.169c7.131-7.131,11.06-16.61,11.06-26.692 C494.936,37.396,491.007,27.915,483.876,20.791z M466.61,56.897L257.457,266.05c-0.035,0.036-0.055,0.078-0.089,0.107 l-33.989,15.131L238.51,247.3c0.03-0.036,0.071-0.055,0.107-0.09L447.765,38.058c5.038-5.039,13.819-5.033,18.846,0.005 c2.518,2.51,3.905,5.855,3.905,9.414C470.516,51.036,469.127,54.38,466.61,56.897z"></path> </g> </g> </g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M389.844,182.85c-6.743,0-12.21,5.467-12.21,12.21v222.968c0,23.562-19.174,42.735-42.736,42.735H67.157 c-23.562,0-42.736-19.174-42.736-42.735V150.285c0-23.562,19.174-42.735,42.736-42.735h267.741c6.743,0,12.21-5.467,12.21-12.21 s-5.467-12.21-12.21-12.21H67.157C30.126,83.13,0,113.255,0,150.285v267.743c0,37.029,30.126,67.155,67.157,67.155h267.741 c37.03,0,67.156-30.126,67.156-67.155V195.061C402.054,188.318,396.587,182.85,389.844,182.85z"></path> <path d="M483.876,20.791c-14.72-14.72-38.669-14.714-53.377,0L221.352,229.944c-0.28,0.28-3.434,3.559-4.251,5.396l-28.963,65.069 c-2.057,4.619-1.056,10.027,2.521,13.6c2.337,2.336,5.461,3.576,8.639,3.576c1.675,0,3.362-0.346,4.96-1.057l65.07-28.963 c1.83-0.815,5.114-3.97,5.396-4.25L483.876,74.169c7.131-7.131,11.06-16.61,11.06-26.692 C494.936,37.396,491.007,27.915,483.876,20.791z M466.61,56.897L257.457,266.05c-0.035,0.036-0.055,0.078-0.089,0.107 l-33.989,15.131L238.51,247.3c0.03-0.036,0.071-0.055,0.107-0.09L447.765,38.058c5.038-5.039,13.819-5.033,18.846,0.005 c2.518,2.51,3.905,5.855,3.905,9.414C470.516,51.036,469.127,54.38,466.61,56.897z"></path> </g> </g> </g></svg>' +
                    '</button>';
                button.style.display = 'none';
                el.insertBefore(button, el.firstChild);

                // Show the button when hovered over the parent element
                el.addEventListener('mouseenter', () => {
                    button.style.display = 'block';
                });

                el.addEventListener('mouseleave', () => {
                    button.style.display = 'none';
                });
            });

            /**
             * Create a channel and listen for content changes in the admin
             */
            new BroadcastChannel('cms').addEventListener('message', (event) => {
                if (event.data === 'content_published') {
                    location.reload();
                }
            });
        });
    </script>
@endpushonce
